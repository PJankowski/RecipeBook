!function(){"use strict";angular.module("Recipes",["ui.router","Postman","angular-jwt"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,n,t){n.otherwise("/"),t.html5Mode(!0),e.state("recipes",{url:"/recipes",templateUrl:"/app/partials/recipes.html",controller:"RecipesCtrl"}).state("menu",{url:"/menu",templateUrl:"/app/partials/menu.html",controller:"MenuCtrl"}).state("shopping",{url:"/shopping",templateUrl:"/app/partials/shopping.html",controller:"ShoppingCtrl"}).state("home",{url:"/",templateUrl:"/app/partials/home.html",controller:"AuthCtrl"})}])}(),function(){"use strict";angular.module("Recipes").factory("Auth",["$q","$http","$window",function(e,n,t){return{login:function(o){var r=e.defer();return n.post("/api/login",o).success(function(e){t.localStorage.jwt=e,r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},signup:function(t){var o=e.defer();return n.post("/api/signup",t).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},getToken:function(){return t.localStorage.jwt}}}])}(),function(){"use strict";angular.module("Recipes").factory("Recipe",["$http","$q",function(e,n){return{getRecipes:function(){var t=n.defer();return e.get("/api/recipes").success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise},addNewRecipe:function(t,o){var r=n.defer();return e.post("/api/recipes",{recipe:t,ingredients:o}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},addToMenu:function(t){var o=n.defer();return e.put("/api/recipes/menu",t).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},removeRecipe:function(t){var o=n.defer();return e["delete"]("/api/recipes/"+t._id).success(function(){o.resolve(!0)}).error(function(e){o.reject(e)}),o.promise}}}])}(),function(){"use strict";angular.module("Recipes").factory("Menu",["$q","$http",function(e,n){return{getMenu:function(){var t=e.defer();return n.get("/api/recipes/menu").success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise},removeFromMenu:function(t){var o=e.defer();return n.put("/api/recipes/menu/remove",t).success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise}}}])}(),function(){"use strict";angular.module("Recipes").factory("Shopping",["$q","$http",function(e,n){return{getShoppingList:function(){var t=e.defer();return n.get("/api/recipes/shopping").success(function(e){t.resolve(e)}).error(function(e){t.reject(e)}),t.promise},buyItem:function(t){var o=e.defer();return n.put("/api/recipes/item",t).success(function(e){o.resolve(e)}).error(function(e){o.rejet(e)}),o.promise}}}])}(),function(){"use strict";angular.module("Recipes").controller("AuthCtrl",["$scope","$rootScope","$state","$window","jwtHelper","Auth",function(e,n,t,o,r,i){e.title="Welcome",e.login=function(e){i.login(e).then(function(){var e=i.getToken(),o=r.decodeToken(e);n.user=o,t.go("recipes")})},e.signup=function(e){i.signup(e).then(function(e){console.log(e)},function(e){console.log(e)})}}])}(),function(){"use strict";angular.module("Recipes").controller("RecipesCtrl",["$scope","Recipe","Menu","Shopping",function(e,n,t,o){e.title="Recipes",e.newForm=!1,n.getRecipes().then(function(n){e.recipes=n}),e.ingredients=[1],e.newRecipe=function(){e.newForm=!e.newForm},e.addIngredient=function(){var n=e.ingredients.length+1;e.ingredients.push(n)},e.addRecipe=function(t){var o={title:t.title,description:t.description};n.addNewRecipe(o,t.ingredients).then(function(n){e.recipes.push(n),e.newRec="",e.newForm=!1},function(e){console.log(e)})},e.removeRecipe=function(t,o){n.removeRecipe(t).then(function(){e.recipes.splice(o,1)},function(e){alert(e)})},e.removeIngredient=function(n){e.ingredients.splice(n,1)},e.addToMenu=function(e,t){n.addToMenu(e).then(function(){e.inMenu=!0},function(e){console.log(e)})},e.removeMenu=function(e,n){t.removeFromMenu(e).then(function(){e.inMenu=!1},function(e){console.log(e)})}}])}(),function(){"use strict";angular.module("Recipes").controller("MenuCtrl",["$scope","Menu",function(e,n){e.title="Menu",n.getMenu().then(function(n){e.menu=n},function(e){console.log(e)})}])}(),function(){"use strict";angular.module("Recipes").controller("ShoppingCtrl",["$scope","Shopping",function(e,n){e.title="Shopping List",n.getShoppingList().then(function(n){e.list=n},function(e){console.log(e)}),e.buyItem=function(e,t){n.buyItem(e,t).then(function(){e.bought=!e.bought},function(e){console.log(e)})}}])}();